From 294fb95aaa936106545b2fdc3c64baea719638a1 Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Mon, 20 Aug 2018 22:57:43 +0300
Subject: [PATCH 10/10] gnss. fix Samsung AGPS

---
 current.txt                   | 2 +-
 gnss/1.0/IAGnssRil.hal        | 3 +++
 gnss/1.0/default/AGnssRil.cpp | 1 +
 3 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/current.txt b/current.txt
index db34c37b..96c9709d 100644
--- a/current.txt
+++ b/current.txt
@@ -76,7 +76,7 @@ c9d318df7922bde3b265927b521ff5a965002826fc0cabfcaef52a56760f2d34 android.hardwar
 da13bd69282fb275767abb18704c57ff8038e6c139ad17157dc702810f70d06a android.hardware.gatekeeper@1.0::types
 37c7da4f823ec958dfa9c960e2d341c48f877e0bfa758f3fa9e2d9c1e1bd66d9 android.hardware.gnss@1.0::IAGnss
 7ec9afdb964bfb8369866913caf018f2636592885bcb558a65de2c5436ab4f60 android.hardware.gnss@1.0::IAGnssCallback
-d16e6a359be6963ea753d7138e84ecf2b93052097938938c4d36d7a47ea2e2ae android.hardware.gnss@1.0::IAGnssRil
+17d05c788ccfcf92ab89b38562386ff88d95ffd2d281c6f440a51e25837133d8 android.hardware.gnss@1.0::IAGnssRil
 2f907708d74d94b1e121ed27651c9c72af65952d347b58ff07dac5d5d7a7f678 android.hardware.gnss@1.0::IAGnssRilCallback
 5ac7edad06d76064b882be161f3f9d9692a997ec72e9f36addb7fe8918f49992 android.hardware.gnss@1.0::IGnss
 b05c983c87c3376e145223688c3b541b5e11b827f211e38d5a31af1ca3a2e222 android.hardware.gnss@1.0::IGnssBatching
diff --git a/gnss/1.0/IAGnssRil.hal b/gnss/1.0/IAGnssRil.hal
index 12289f68..3031f2a8 100644
--- a/gnss/1.0/IAGnssRil.hal
+++ b/gnss/1.0/IAGnssRil.hal
@@ -68,6 +68,9 @@ interface IAGnssRil {
          */
         uint16_t lac;
 
+        /** Samsung AGPS. */
+        uint16_t psc;
+
         /** Cell id in 2G. Utran Cell id in 3G. Cell Global Id EUTRA in LTE. */
         uint32_t cid;
 
diff --git a/gnss/1.0/default/AGnssRil.cpp b/gnss/1.0/default/AGnssRil.cpp
index 14583274..468e6971 100644
--- a/gnss/1.0/default/AGnssRil.cpp
+++ b/gnss/1.0/default/AGnssRil.cpp
@@ -101,6 +101,7 @@ Return<void> AGnssRil::setRefLocation(const IAGnssRil::AGnssRefLocation& aGnssRe
         .mcc = cellID.mcc,
         .mnc = cellID.mnc,
         .lac = cellID.lac,
+        .psc = cellID.psc,
         .cid = cellID.cid,
         .tac = cellID.tac,
         .pcid = cellID.pcid
-- 
2.11.0

