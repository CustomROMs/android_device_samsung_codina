From ba3d2027706ce86f02d02e6f5e22c7c5d8e46e28 Mon Sep 17 00:00:00 2001
From: Chirayu Desai <chirayudesai1@gmail.com>
Date: Wed, 15 Jul 2015 19:47:45 +0530
Subject: [PATCH 45/90] Allow setting the recovery density separately from the
 aapt config

Change-Id: I817a4c01302956ec846503d9a585c43e690e45bf
---
 core/Makefile | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/core/Makefile b/core/Makefile
index c18f05f37..fb013f357 100644
--- a/core/Makefile
+++ b/core/Makefile
@@ -1330,6 +1330,9 @@ recovery_resources_common := $(call include-path-for, recovery)/res
 
 # Set recovery_density to the density bucket of the device.
 recovery_density := unknown
+ifneq (,$(TARGET_RECOVERY_DENSITY))
+recovery_density := $(filter %dpi,$(TARGET_RECOVERY_DENSITY))
+else
 ifneq (,$(PRODUCT_AAPT_PREF_CONFIG))
 # If PRODUCT_AAPT_PREF_CONFIG includes a dpi bucket, then use that value.
 recovery_density := $(filter %dpi,$(PRODUCT_AAPT_PREF_CONFIG))
@@ -1337,6 +1340,7 @@ else
 # Otherwise, use the default medium density.
 recovery_densities := mdpi
 endif
+endif
 
 ifneq (,$(wildcard $(recovery_resources_common)-$(recovery_density)))
 recovery_resources_common := $(recovery_resources_common)-$(recovery_density)
-- 
2.17.0

