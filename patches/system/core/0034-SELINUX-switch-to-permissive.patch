From d4241d0768c41f747631e5df960b0ec33827d77c Mon Sep 17 00:00:00 2001
From: Varun Chitre <varun.chitre15@gmail.com>
Date: Sun, 28 Aug 2016 07:22:48 -0400
Subject: [PATCH 34/42] SELINUX: switch to permissive

Change-Id: I0ff027236d1db006df5ac1060b702d037b2ace95
---
 init/Android.bp  | 1 -
 init/Android.mk  | 3 +--
 init/selinux.cpp | 2 +-
 3 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/init/Android.bp b/init/Android.bp
index ed826d560..9d6289163 100644
--- a/init/Android.bp
+++ b/init/Android.bp
@@ -25,7 +25,6 @@ cc_defaults {
         "-Wall",
         "-Wextra",
         "-Wno-unused-parameter",
-        "-Werror",
         "-DALLOW_LOCAL_PROP_OVERRIDE=1",
         "-DALLOW_PERMISSIVE_SELINUX=0",
         "-DREBOOT_BOOTLOADER_ON_PANIC=0",
diff --git a/init/Android.mk b/init/Android.mk
index dcde6af35..ce706e008 100644
--- a/init/Android.mk
+++ b/init/Android.mk
@@ -34,8 +34,7 @@ init_cflags += \
     $(init_options) \
     -Wall -Wextra \
     -Wno-unused-parameter \
-    -Werror \
-    -std=gnu++1z \
+    -std=gnu++1z
 
 # --
 
diff --git a/init/selinux.cpp b/init/selinux.cpp
index 0ba5c4ae3..3a7ecee8c 100644
--- a/init/selinux.cpp
+++ b/init/selinux.cpp
@@ -390,7 +390,7 @@ void SelinuxInitialize() {
     }
 
     bool kernel_enforcing = (security_getenforce() == 1);
-    bool is_enforcing = IsEnforcing();
+    bool is_enforcing = false;// IsEnforcing();
     if (kernel_enforcing != is_enforcing) {
         if (security_setenforce(is_enforcing)) {
             PLOG(FATAL) << "security_setenforce(%s) failed" << (is_enforcing ? "true" : "false");
-- 
2.17.0

