From 88385bf24f1b2c2d1ed2e51d7251ff873402201e Mon Sep 17 00:00:00 2001
From: xyyx <xyyx@mail.ru>
Date: Tue, 7 Aug 2018 08:38:17 +0800
Subject: [PATCH 08/30] Allow run services without selinux domain

Change-Id: Id1bd6fc9b389ec5a4fdfd834a6cf7903a72b6476
---
 init/service.cpp | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

diff --git a/init/service.cpp b/init/service.cpp
index 37d3a8807..580dda088 100644
--- a/init/service.cpp
+++ b/init/service.cpp
@@ -89,13 +89,7 @@ static Result<std::string> ComputeContextFromExecutable(const std::string& servi
         computed_context = new_con;
         free(new_con);
     }
-    if (rc == 0 && computed_context == mycon.get()) {
-        return Error() << "File " << service_path << "(labeled \"" << filecon.get()
-                       << "\") has incorrect label or no domain transition from " << mycon.get()
-                       << " to another SELinux domain defined. Have you configured your "
-                          "service correctly? https://source.android.com/security/selinux/"
-                          "device-policy#label_new_services_and_address_denials";
-    }
+
     if (rc < 0) {
         return Error() << "Could not get process context";
     }
-- 
2.11.0

