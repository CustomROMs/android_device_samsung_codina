From f7282b7997290c7fa57d1ad9bbf6faa32aa978a2 Mon Sep 17 00:00:00 2001
From: Shilin Victor <radicaldreamer00001@gmail.com>
Date: Fri, 29 Mar 2019 22:55:05 +0300
Subject: [PATCH 2/9] system-vold_W01-Fix-Use-volume-label.patch

Change-Id: I2a27c545a3654c5c6a3a1504f427d4b1f1aa11ca
---
 PublicVolume.cpp | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/PublicVolume.cpp b/PublicVolume.cpp
index bac6499..2d1d869 100644
--- a/PublicVolume.cpp
+++ b/PublicVolume.cpp
@@ -113,9 +113,11 @@ status_t PublicVolume::doMount() {
         return -EIO;
     }
 
-    // Use UUID as stable name, if available
+    // Use volume label and otherwise UUID as stable name, if available
     std::string stableName = getId();
-    if (!mFsUuid.empty()) {
+    if (!mFsLabel.empty()) {
+        stableName = mFsLabel;
+    } else if (!mFsUuid.empty()) {
         stableName = mFsUuid;
     }
 
-- 
2.11.0

