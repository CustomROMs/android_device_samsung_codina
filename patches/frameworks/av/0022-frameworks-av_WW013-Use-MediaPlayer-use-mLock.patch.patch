From db216d6f6a4e57b9f19ead8cd569a6e9485446be Mon Sep 17 00:00:00 2001
From: Shilin Victor <radicaldreamer00001@gmail.com>
Date: Fri, 29 Mar 2019 22:51:38 +0300
Subject: [PATCH 22/45] frameworks-av_WW013-Use-MediaPlayer-use-mLock.patch

Change-Id: I6f625f39c94258f7387b214cb2bbd9f0adefda56
---
 media/libmedia/mediaplayer.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/media/libmedia/mediaplayer.cpp b/media/libmedia/mediaplayer.cpp
index 1057fc039..72847f3a8 100644
--- a/media/libmedia/mediaplayer.cpp
+++ b/media/libmedia/mediaplayer.cpp
@@ -930,6 +930,7 @@ void MediaPlayer::died()
 }
 
 status_t MediaPlayer::setNextMediaPlayer(const sp<MediaPlayer>& next) {
+    Mutex::Autolock _l(mLock);
     if (mPlayer == NULL) {
         return NO_INIT;
     }
-- 
2.11.0

