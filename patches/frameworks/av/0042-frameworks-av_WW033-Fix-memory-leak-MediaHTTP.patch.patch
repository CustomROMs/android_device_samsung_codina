From a366e70dbc84b8a9820a187ab71accdbb93dbfb8 Mon Sep 17 00:00:00 2001
From: Shilin Victor <radicaldreamer00001@gmail.com>
Date: Fri, 29 Mar 2019 22:51:40 +0300
Subject: [PATCH 42/45] frameworks-av_WW033-Fix-memory-leak-MediaHTTP.patch

Change-Id: I06cdc958390f4b46f3b37880a951528d9fc320a5
---
 media/libstagefright/http/MediaHTTP.cpp | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/media/libstagefright/http/MediaHTTP.cpp b/media/libstagefright/http/MediaHTTP.cpp
index 801ff2679..f6d089379 100644
--- a/media/libstagefright/http/MediaHTTP.cpp
+++ b/media/libstagefright/http/MediaHTTP.cpp
@@ -206,6 +206,11 @@ void MediaHTTP::clearDRMState_l() {
         mDrmManagerClient->closeDecryptSession(mDecryptHandle);
         mDecryptHandle = NULL;
     }
+
+    if (mDrmManagerClient != NULL) {
+        delete mDrmManagerClient;
+        mDrmManagerClient = NULL;
+    }
 }
 
 }  // namespace android
-- 
2.11.0

