From 838fdbfbcc7aad2b8eff6004d79b949f392f43ab Mon Sep 17 00:00:00 2001
From: Shilin Victor <radicaldreamer00001@gmail.com>
Date: Fri, 29 Mar 2019 22:51:38 +0300
Subject: [PATCH 25/45] frameworks-av_WW016-fix-HEVC-resolution-change.patch

Change-Id: I2a886d773a9f4ab0af0c08d6953aeb7d5d49aea2
---
 media/libstagefright/codecs/hevcdec/SoftHEVC.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/media/libstagefright/codecs/hevcdec/SoftHEVC.cpp b/media/libstagefright/codecs/hevcdec/SoftHEVC.cpp
index 98fafbc9c..f0d718c18 100644
--- a/media/libstagefright/codecs/hevcdec/SoftHEVC.cpp
+++ b/media/libstagefright/codecs/hevcdec/SoftHEVC.cpp
@@ -586,6 +586,8 @@ void SoftHEVC::onQueueFilled(OMX_U32 portIndex) {
                 mChangingResolution = false;
                 resetDecoder();
                 resetPlugin();
+                mStride = outputBufferWidth();
+                setParams(mStride);
                 continue;
             }
 
-- 
2.11.0

