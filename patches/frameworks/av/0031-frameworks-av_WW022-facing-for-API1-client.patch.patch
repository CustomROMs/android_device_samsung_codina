From baf917f4267eb899a3cb5f0c18871582748adbdb Mon Sep 17 00:00:00 2001
From: Shilin Victor <radicaldreamer00001@gmail.com>
Date: Fri, 29 Mar 2019 22:51:39 +0300
Subject: [PATCH 31/45] frameworks-av_WW022-facing-for-API1-client.patch

Change-Id: I478c923590e15d122948623d0cc886f80cf1f14d
---
 services/camera/libcameraservice/CameraService.cpp | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/services/camera/libcameraservice/CameraService.cpp b/services/camera/libcameraservice/CameraService.cpp
index 2e563ae80..96f5f3743 100644
--- a/services/camera/libcameraservice/CameraService.cpp
+++ b/services/camera/libcameraservice/CameraService.cpp
@@ -442,6 +442,12 @@ status_t CameraService::getCameraInfo(int cameraId,
         mModule->getCameraInfo(cameraId, &info));
     cameraInfo->facing = info.facing;
     cameraInfo->orientation = info.orientation;
+    // CameraInfo is for android.hardware.Camera which does not
+    // support external camera facing. The closest approximation would be
+    // front camera.
+    if (cameraInfo->orientation == CAMERA_FACING_EXTERNAL) {
+        cameraInfo->orientation = CAMERA_FACING_FRONT;
+    }
     return rc;
 }
 
-- 
2.11.0

