From 708873dd9b5a4b5c2cdcace53f88ffc3c91fb30f Mon Sep 17 00:00:00 2001
From: Shilin Victor <chrono.monochrome@gmail.com>
Date: Sun, 2 Sep 2018 06:53:55 +0300
Subject: [PATCH 06/46] libbinder: fix ashmem fix

Change-Id: I21a0ba811e6a4d0f4aa2f94d28b53f1828994ac2
---
 libs/binder/Parcel.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/libs/binder/Parcel.cpp b/libs/binder/Parcel.cpp
index 90718e4b23..924d15b0ec 100644
--- a/libs/binder/Parcel.cpp
+++ b/libs/binder/Parcel.cpp
@@ -2756,7 +2756,9 @@ void Parcel::initState()
     mFdsKnown = true;
     mAllowFds = true;
     mOwner = nullptr;
+#ifndef DISABLE_ASHMEM_TRACKING
     mOpenAshmemSize = 0;
+#endif
 
     // racing multiple init leads only to multiple identical write
     if (gMaxFds == 0) {
-- 
2.17.0

