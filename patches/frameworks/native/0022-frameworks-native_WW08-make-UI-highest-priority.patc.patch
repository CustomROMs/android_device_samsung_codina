From 160084eb857c3cd698187aec7d8d9cceb35cf6a1 Mon Sep 17 00:00:00 2001
From: Shilin Victor <radicaldreamer00001@gmail.com>
Date: Fri, 29 Mar 2019 22:51:46 +0300
Subject: [PATCH 22/30] frameworks-native_WW08-make-UI-highest-priority.patch

Change-Id: Ib494721548b61819c3b47d60f6f6f6c216c68444
---
 services/surfaceflinger/DispSync.cpp                   | 2 +-
 services/surfaceflinger/DisplayHardware/HWComposer.cpp | 2 +-
 services/surfaceflinger/EventThread.cpp                | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/services/surfaceflinger/DispSync.cpp b/services/surfaceflinger/DispSync.cpp
index 5ba387d02..efe156d9c 100644
--- a/services/surfaceflinger/DispSync.cpp
+++ b/services/surfaceflinger/DispSync.cpp
@@ -294,7 +294,7 @@ DispSync::DispSync() :
         mRefreshSkipCount(0),
         mThread(new DispSyncThread()) {
 
-    mThread->run("DispSync", PRIORITY_URGENT_DISPLAY + PRIORITY_MORE_FAVORABLE);
+    mThread->run("DispSync", PRIORITY_REALTIME);
 
     reset();
     beginResync();
diff --git a/services/surfaceflinger/DisplayHardware/HWComposer.cpp b/services/surfaceflinger/DisplayHardware/HWComposer.cpp
index 17e91d929..0f8c6bda4 100644
--- a/services/surfaceflinger/DisplayHardware/HWComposer.cpp
+++ b/services/surfaceflinger/DisplayHardware/HWComposer.cpp
@@ -1338,7 +1338,7 @@ void HWComposer::VSyncThread::setEnabled(bool enabled) {
 }
 
 void HWComposer::VSyncThread::onFirstRef() {
-    run("VSyncThread", PRIORITY_URGENT_DISPLAY + PRIORITY_MORE_FAVORABLE);
+    run("VSyncThread", PRIORITY_REALTIME);
 }
 
 bool HWComposer::VSyncThread::threadLoop() {
diff --git a/services/surfaceflinger/EventThread.cpp b/services/surfaceflinger/EventThread.cpp
index f76020000..d537de2bd 100644
--- a/services/surfaceflinger/EventThread.cpp
+++ b/services/surfaceflinger/EventThread.cpp
@@ -90,7 +90,7 @@ void EventThread::sendVsyncHintOnLocked() {
 }
 
 void EventThread::onFirstRef() {
-    run("EventThread", PRIORITY_URGENT_DISPLAY + PRIORITY_MORE_FAVORABLE);
+    run("EventThread", PRIORITY_REALTIME);
 }
 
 sp<EventThread::Connection> EventThread::createEventConnection() const {
-- 
2.11.0

